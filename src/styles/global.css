@import "tailwindcss";

/* =========================================================
   0) 主题变量 + 统一字号体系（Type Scale）
   ========================================================= */
:root{
  /* 颜色 */
  --bg:#fff;
  --text:#111827;
  --muted:#6b7280;
  --subtle:#9ca3af;
  --border:#e5e7eb;
  --card:#f9fafb;
  --link:#2563eb;
  --link-hover:#1d4ed8;
  --tag-bg:#f3f4f6;
  --tag-text:#374151;
  --radius:12px;

  /* 字体族 */
  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

  /* ===== 字号体系（桌面默认） ===== */
  --fs-meta: 0.94rem;                 /* 面包屑/标签/弱化信息 */
  --fs-body: 1.00rem;                 /* 正文基线 */
  --fs-nav:  1.02rem;                 /* 导航链接（比正文略大） */
  --fs-brand:1.14rem;                 /* 左侧品牌文字 */
  --fs-h3:   1.05rem;                 /* 三级标题：略大于正文 */
  --fs-h2:   1.14rem;                 /* 二级标题：清晰但克制 */
  --fs-h1:   clamp(1.45rem, 1.05rem + 1.2vw, 1.90rem); /* 页面主标题 */
}
@media (prefers-color-scheme: dark){
  :root{
    --bg:#0b0f15;
    --text:#e5e7eb;
    --muted:#9ca3af;
    --subtle:#94a3b8;
    --border:#1f2937;
    --card:#0f172a;
    --link:#93c5fd;
    --link-hover:#bfdbfe;
    --tag-bg:#111827;
    --tag-text:#e5e7eb;
  }
}

/* =========================================================
   ① 基础：字号/行高/抗锯齿
   ========================================================= */
@layer base{
  html{ font-size: clamp(16px, 0.6vw + 14px, 18px); }
  body{
    background:var(--bg);
    color:var(--text);
    line-height:1.65;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    font-size: var(--fs-body);
  }
}
img,svg,video,canvas,audio,iframe{ max-width:100%; height:auto; display:block; }
*{ min-width:0; }
.break-anywhere{ overflow-wrap:anywhere; word-break:break-word; }

/* =========================================================
   ② 字体族（按语言）
   ========================================================= */
html:lang(en) body{
  font-family:"Inter",system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
}
html:lang(zh) body,
html:lang(yue) body,
html:lang(zh-HK) body{
  font-family:"PingFang SC","Noto Sans SC","Microsoft YaHei","Hiragino Sans GB","Source Han Sans SC",system-ui,-apple-system,Arial,sans-serif;
  font-variant-east-asian:normal;
}

/* =========================================================
   ③ 顶部导航（提升可读性）
   ========================================================= */
/* 下面三条覆盖常见结构；如有 .site-nav / .brand 类名会自动应用 */
header nav { font-size: var(--fs-nav); }
header nav a, header nav button { font-weight: 500; }
header .brand, header .site-brand, header .logo-text { font-size: var(--fs-brand); font-weight: 800; letter-spacing: -0.01em; }

/* =========================================================
   ④ 标题区（kicker / title / subtitle）
   ========================================================= */
.post{ max-width:70ch; margin:0 auto; }
.post-kicker{ font-size:var(--fs-meta); font-weight:500; color:var(--muted); margin:0 0 .35rem 0; }

.post-title{
  font-size: var(--fs-h1);
  font-weight:800;
  line-height:1.22;
  letter-spacing:-0.012em;
  margin:.3rem 0 .6rem 0;
  color:var(--text);
  text-wrap:balance;
  hyphens:auto;
}
.post-subtitle{ font-size:1.02rem; color:var(--muted); margin:0 0 1rem 0; }
.post-header{ max-width:72ch; margin:0 auto 1.2rem auto; }

/* =========================================================
   ⑤ 面包屑 / 返回链接 / Meta
   ========================================================= */
.breadcrumbs{ color:var(--subtle); font-size:var(--fs-meta); }
.breadcrumbs a{ color:inherit; text-decoration:none; }
.breadcrumbs a:hover{ text-decoration:underline; color:var(--text); }
.breadcrumbs .sep{ opacity:.45; }

.backlink{ margin:.25rem 0 .75rem 0; font-size:var(--fs-meta); }
.backlink a{ color:var(--muted); text-decoration:none; }
.backlink a:hover{ color:var(--text); text-decoration:underline; }

.post-meta{
  display:flex; flex-wrap:wrap; gap:.5rem 1rem;
  font-size:var(--fs-meta); color:var(--subtle); margin-bottom:1.25rem;
}
.tag{
  font-size:.74rem; padding:.15rem .5rem; border-radius:9999px;
  background:var(--card); color:var(--muted); border:1px solid var(--border);
}
.tag:hover{ filter:brightness(1.05); }

/* =========================================================
   ⑥ 正文（段落/标题/列表）
   ========================================================= */
.post-body{ padding-bottom:max(84px, env(safe-area-inset-bottom)); }
.post-body p{ margin:1.1rem 0; line-height:1.85; font-size:var(--fs-body); color:var(--text); }

/* 统一后的小标题层级：H2 > H3 > 正文 ≈ 导航 */
.post-body h2{
  font-size: var(--fs-h2);
  font-weight:600;
  line-height:1.35;
  margin:1.6rem 0 0.9rem;
}
.post-body h3{
  font-size: var(--fs-h3);
  font-weight:600;
  line-height:1.4;
  margin:1.2rem 0 .7rem;
}

.post-body ul,.post-body ol{ margin:1rem 0 1rem 1.25rem; }
.post-body li{ margin:.4rem 0; }
.post-body hr{ border:0; border-top:1px solid var(--border); margin:1.2rem 0; opacity:.6; }

/* =========================================================
   ⑦ 代码与代码块（等宽字体 + 亮暗主题和谐）
   ========================================================= */
.post-body code{
  font-family: var(--mono);
  font-size: 0.92em;
  background: var(--tag-bg);
  color: var(--tag-text);
  padding: 0.15em 0.4em;
  border-radius: 0.3em;
  border: 1px solid var(--border);
}
.post-body pre{
  font-family: var(--mono);
  font-size: 0.94rem;
  line-height: 1.6;
  background: var(--card);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 0.75rem;
  padding: 1rem 1.1rem;
  overflow-x: auto;
  margin: 1.4rem 0;
  -webkit-overflow-scrolling: touch;
}
.post-body pre code{
  background: transparent;
  border: 0;
  padding: 0;
  font-size: 1em;
}
.post-body pre,
.post-body code{
  word-wrap: normal;
  overflow-wrap: anywhere;
  word-break: normal;
}

/* =========================================================
   ⑧ 嵌入图表/图片（含 Tableau iframe）
   ========================================================= */
.post-body figure{ margin:1.5rem 0; }
.viz iframe{
  width:100%; aspect-ratio:16/9; border:0; border-radius:.75rem;
  background:var(--card); box-shadow:0 0 0 1px var(--border) inset;
}
.viz{ position:relative; }
.viz--fallback{ padding-top:56.25%; }
.viz--fallback>iframe{ position:absolute; inset:0; width:100%; height:100%; border:0; border-radius:.75rem; }

/* =========================================================
   ⑨ 链接
   ========================================================= */
.post-body a{ color:var(--link); text-decoration:underline; text-underline-offset:3px; font-weight:500; transition:color .2s ease; }
.post-body a:hover{ color:var(--link-hover); }

/* =========================================================
   ⑩ 封面图片
   ========================================================= */
.post-cover{ margin:1rem auto 1.25rem; text-align:center; }
.post-cover img{
  width:100%; max-width:220px; height:auto; border-radius:.75rem; display:inline-block;
  background:var(--card); box-shadow:0 0 0 1px var(--border) inset;
}
.post-cover figcaption{ margin-top:.5rem; font-size:var(--fs-meta); color:var(--muted); }
.post-cover figcaption a{ color:var(--link); text-decoration:underline; text-underline-offset:3px; }
.post-cover figcaption a:hover{ color:var(--link-hover); }

/* =========================================================
   ⑪ 项目详情页 Hero 图
   ========================================================= */
.project-hero{ width:100%; margin:2rem auto; text-align:center; }
.project-hero__img{ width:100%; max-width:none; height:auto; display:block; margin:0 auto; border-radius:8px; box-shadow:0 4px 20px rgba(0,0,0,.12); }
.project-hero__cap{ margin-top:12px; font-size:.95em; color:#6e6e73; }
@media (min-width:1024px){ .project-hero__img{ max-width:1280px; } }

/* =========================================================
   ⑫ 手机优化（比例更紧凑）
   ========================================================= */
@media (max-width:480px){
  html{ font-size:15.5px; }
  .post{ padding-inline:.25rem; }

  :root{
    --fs-nav:  1.00rem;
    --fs-brand:1.10rem;
    --fs-h1: clamp(1.28rem, 1.0rem + 2.6vw, 1.52rem);
    --fs-h2: 1.10rem;
    --fs-h3: 1.03rem;
  }

  .post-title{ line-height:1.22; }
  .post-subtitle{ font-size:1.0rem; margin-bottom:1rem; }
  .post-meta{ font-size:var(--fs-meta); margin-bottom:1.1rem; }
  .tag{ font-size:.72rem; }
  .post-body p{ margin:1.05rem 0; line-height:1.8; }
  .post-body h2{ margin:1.4rem 0 .8rem; }
  .post-body h3{ margin:1.15rem 0 .6rem; }
  .viz iframe{ aspect-ratio:3/4; min-height:56vh; }
  .post-body pre{ font-size:0.88rem; }
}

/* =========================================================
   ⑬ 代码块滚动条弱化（可选）
   ========================================================= */
.post-body pre::-webkit-scrollbar{ height:10px; }
.post-body pre::-webkit-scrollbar-thumb{ background:var(--border); border-radius:9999px; }
.post-body pre::-webkit-scrollbar-track{ background:transparent; }

/* strong  */
.post-body strong{ font-weight:600; }

/* 全站统一的引用块样式 */
.post-body blockquote{
  margin: 1.1rem 0;
  padding: .75rem 1rem;
  background: var(--card);
  border-left: 3px solid var(--border);
  border-radius: .5rem;
  color: var(--muted);
}
.post-body blockquote p{ margin: .4rem 0; }


/* ============ 博客专用排版 ============ */
.blog-typo{
  --fs-body: 1rem;
  --fs-h2: 1.12rem;
  --fs-h3: 1.02rem;
}
.blog-typo p{ font-size: var(--fs-body); line-height: 1.85; margin: 1rem 0; }
.blog-typo h2{ font-size: var(--fs-h2); font-weight: 600; line-height: 1.35; margin: 1.4rem 0 .8rem; }
.blog-typo h3{ font-size: var(--fs-h3); font-weight: 600; line-height: 1.4;  margin: 1rem 0 .6rem; }
.blog-typo strong{ font-weight: 600; }            /* 粗体稍降一点，耐看 */
.blog-typo hr{ border:0; border-top:1px solid var(--border); margin: 1.2rem 0; opacity:.6; }

/* “图标题”（把 Figure 放进 figcaption） */
.blog-typo .fig-title{
  margin-top: .5rem; font-size: .95rem; color: var(--muted);
  text-align: left;
}

/* 关键点列表：比普通列表更清爽 */
.blog-typo dl.kv{ margin: .8rem 0 1.1rem; }
.blog-typo dl.kv dt{ font-weight: 600; margin-top: .35rem; }
.blog-typo dl.kv dd{ margin: .15rem 0 .55rem 0; color: var(--muted); }

/* 引用（Tip 等）作为 callout */
.blog-typo blockquote{
  margin: 1.1rem 0; padding: .75rem 1rem;
  background: var(--card); color: var(--muted);
  border-left: 3px solid var(--border); border-radius: .5rem;
}
.blog-typo figure{ margin: 1.2rem 0 1.4rem; }
.blog-typo .viz iframe{ width:100%; aspect-ratio:16/9; border:0; border-radius:.75rem; background:var(--card); box-shadow:0 0 0 1px var(--border) inset; }
